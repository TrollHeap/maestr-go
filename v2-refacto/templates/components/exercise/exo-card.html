{{define "exo-card"}}
<div class="exercise-item">
    <button 
        class="exercise-status {{if .Done}}done{{else if gt (len .CompletedSteps) 0}}wip{{else}}todo{{end}}"
        hx-post="/toggle-status?id={{.ID}}"
        hx-target="closest .exercise-item"
        hx-swap="outerHTML"
        style="cursor: pointer; background: transparent; border: none; padding: 0; font-size: inherit; font-family: inherit;">
        {{if .Done}}✓{{else if gt (len .CompletedSteps) 0}}◐{{else}}○{{end}}
    </button>
    <div class="exercise-info">
        <div class="exercise-header">
            <span class="exercise-id">[#{{printf "%03d" .ID}}]</span>
            <span class="exercise-title">{{.Title}}</span>
        </div>
        <div class="exercise-meta">
            <span class="badge badge-domain">[{{.Domain | upper}}]</span>
            <span class="badge badge-difficulty">[D{{.Difficulty}}]</span>
            <span class="progress-mini">{{len .CompletedSteps}}/{{len .Steps}} étapes</span>
        </div>
    </div>
    <div class="exercise-actions">
        <button 
            class="btn-action btn-toggle"
            hx-post="/toggle-done?id={{.ID}}"
            hx-target="closest .exercise-item"
            hx-swap="outerHTML">
            [TOGGLE]
        </button>
        
        <!-- ✅ MODIFIÉ : Navigation directe vers page -->
        <a 
            href="/exercise/{{.ID}}"
            class="btn-action btn-view"
            style="display: inline-block; text-decoration: none; text-align: center;">
            [DÉTAILS]
        </a>
    </div>
</div>
{{end}}
