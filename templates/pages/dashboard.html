{{define "dashboard"}}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Maestro</title>
    <link rel="stylesheet" href="/public/css/list-exercice.css">
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
<style>
    .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin: 30px 0;
    }

    .stat-card {
        padding: 20px;
        background: #111;
        border: 2px solid #00ff00;
        border-radius: 8px;
        transition: all 0.3s ease;
        box-shadow: 0 0 5px transparent;
    }

    .stat-card:hover {
        border-color: #00cc00;
        box-shadow: 0 0 15px #00ff00;
    }

    .stat-card__value {
        font-size: 2.5em;
        font-weight: bold;
        color: #00ff00;
        margin: 10px 0;
        font-family: monospace;
        text-align: center;
    }

    .stat-card__label {
        font-size: 14px;
        color: #66ff66cc;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        text-align: center;
        font-family: monospace;
    }

    .action-buttons {
        display: flex;
        gap: 15px;
        margin: 35px 0 40px 0;
        flex-wrap: wrap;
        justify-content: center;
    }

    .btn {
        padding: 14px 35px;
        background: #0a0a0a;
        border: 2px solid #00ff00;
        color: #00ff00;
        text-decoration: none;
        cursor: pointer;
        font-family: monospace;
        font-size: 13px;
        text-transform: uppercase;
        border-radius: 6px;
        transition: all 0.3s ease;
        display: inline-block;
        box-shadow: 0 0 5px transparent;
    }

    .btn:hover {
        background: #00ff00;
        color: #0a0a0a;
        box-shadow: 0 0 15px #00ff00;
        transform: translateY(-3px);
    }

    .btn--urgent {
        border-color: #ff6600;
        color: #ff6600;
        box-shadow: 0 0 5px transparent;
    }

    .btn--urgent:hover {
        background: #ff6600;
        color: #0a0a0a;
        box-shadow: 0 0 12px #ff6600;
    }

    .activity-feed {
        margin: 30px 0;
        padding: 20px;
        background: #111;
        border: 2px solid #00ff00;
        border-radius: 8px;
        font-family: monospace;
        font-size: 12px;
    }

    .activity-item {
        padding: 12px;
        margin: 8px 0;
        background: #0a0a0a;
        border-left: 5px solid #666;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-radius: 4px;
        transition: background 0.3s ease;
    }

    .activity-item--urgent {
        border-left-color: #ff6600;
        background: rgba(255, 102, 0, 0.1);
        color: #ff6600;
    }

    .activity-item--done {
        border-left-color: #00ff00;
        background: rgba(0, 255, 0, 0.1);
        color: #00ff00;
    }

    .activity-item--progress {
        border-left-color: #00ccff;
        background: rgba(0, 204, 255, 0.1);
        color: #00ccff;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }

    h2.section-title {
        font-size: 18px;
        margin-bottom: 18px;
        text-transform: uppercase;
        color: #00ff00;
        font-family: monospace;
        border-bottom: 1px solid #00ff00cc;
        padding-bottom: 6px;
    }

    .list-group {
        background: #111;
        border: 2px solid #00ff00;
        border-radius: 8px;
        box-shadow: 0 0 5px #00ff00aa;
    }

    .list-group-item {
        padding: 14px 20px;
        font-size: 13px;
        color: #00ff00cc;
        border-bottom: 1px solid #00ff0088;
        display: flex;
        justify-content: space-between;
        font-family: monospace;
    }

    .list-group-item:last-child {
        border-bottom: none;
    }

    .list-group-item strong {
        color: #00ff00;
    }

    .label-secondary {
        color: #99ff99aa;
        font-size: 11px;
        font-family: monospace;
        opacity: 0.7;
    }

    a.revise-link {
        background: #00ff00;
        color: #0a0a0a;
        padding: 8px 14px;
        border-radius: 4px;
        font-family: monospace;
        font-size: 12px;
        font-weight: bold;
        text-decoration: none;
        white-space: nowrap;
        transition: background 0.2s ease;
    }

    a.revise-link:hover {
        background: #00cc00;
        box-shadow: 0 0 10px #00ff00;
    }
</style>
</head>
<body>
    <div class="scan-line"></div>
{{template "navbar" .}}

<!-- Header -->
<div class="terminal-header">
    <div class="terminal-title">
        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—<br />
        â•‘ COCKPIT MAESTRO SRS                       â•‘<br />
        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    </div>
    <div class="terminal-subtitle">
        &gt; TABLEAU DE BORD | STATUS: <span style="color: #00ff00;">ONLINE</span> |
        RÃ‰VISIONS ATTENTE: <span style="color: #ff6600;">{{.OverdueCount}}</span> |
        AUJOURD'HUI: <span style="color: #00ff00;">{{.TodayCount}}</span>
    </div>
</div>

<div class="container">
    <!-- Quick Actions -->
    <div style="margin: 30px 0;">
        <h2 class="section-title">âš¡ ACTIONS RAPIDES</h2>
        <div class="action-buttons">
            <a href="/session/builder" class="btn">
                ğŸ¯ DÃ©marrer Session
            </a>
            <a href="/planner" class="btn">
                ğŸ“… Voir Calendrier
            </a>
            <a href="/exercises" class="btn">
                ğŸ“š Tous Exercices
            </a>
            {{if gt .OverdueCount 0}}
            <a href="/planner?overdue=1" class="btn btn--urgent">
                âš ï¸ {{.OverdueCount}} En Retard
            </a>
            {{end}}
        </div>
    </div>

    <!-- RÃ©visions en Retard -->
    {{if gt .OverdueCount 0}}
    <div style="margin-bottom: 30px;">
        <h2 class="section-title" style="color: #ff6600;">âš ï¸ RÃ‰VISIONS EN RETARD ({{.OverdueCount}})</h2>
        <div class="list-group">
            {{range .Overdue}}
            <div class="list-group-item activity-item--urgent">
                <div>
                    <strong>{{.Title}}</strong><br />
                    <span class="label-secondary">
                        {{.Domain}} | D{{.Difficulty}} | RÃ©vision #{{.Repetitions}}
                    </span>
                </div>
                <a href="/exercise/{{.ID}}" class="revise-link" title="RÃ©viser {{.Title}}">
                    RÃ‰VISER
                </a>
            </div>
            {{end}}
        </div>
    </div>
    {{end}}

    <!-- Prochaines RÃ©visions -->
    <div style="margin-bottom: 30px;">
        <h2 class="section-title">ğŸ“… PROCHAINES RÃ‰VISIONS ({{.UpcomingCount}})</h2>
        <div class="list-group">
            {{range .Upcoming}}
            <div class="list-group-item activity-item--progress">
                <div>
                    <strong>{{.Title}}</strong><br />
                    <span class="label-secondary">
                        {{.NextReviewAt.Format "02 Jan 15:04"}} | D{{.Difficulty}}
                    </span>
                </div>
                <span style="font-size: 11px; color: #666; font-family: monospace;">
                    {{.Domain}}
                </span>
            </div>
            {{end}}
        </div>
    </div>

    <!-- Breakdown par Domaine -->
    <div style="margin-bottom: 30px;">
        <h2 class="section-title">ğŸ—‚ï¸ RÃ‰PARTITION PAR DOMAINE</h2>
        <div class="dashboard-grid">
            {{range $domain, $count := .Stats.DomainBreakdown}}
            <div class="stat-card">
                <div class="stat-card__label">{{$domain}}</div>
                <div class="stat-card__value">{{$count}}</div>
                <div style="font-size: 12px; color: #66ff66cc; margin-top: 5px; font-family: monospace;">exercices</div>
            </div>
            {{end}}
        </div>
    </div>
</div>

<!-- Footer -->
<div class="terminal-footer">
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br />
    â”‚ Â© 2025 MAESTRO v2.0 | SRS COCKPIT | STAY LEARNING ğŸš€ â”‚<br />
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div>
</body>
</html>
{{end}}
